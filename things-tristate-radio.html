<link rel="import" href="../polymer/polymer.html">

<!--
`<things-tristate-radio>` Things Date Picker

  Example
    
    <things-tristate-radio
      label="label">
    </things-tristate-radio>

@demo demo/index.html
-->
<dom-module is="things-tristate-radio">
  <style>
    :host{
      color:var(--things-primary-text-color);
      font-size:13px;
    }
    label{
      @apply(--things-label);
    }
    input{
      margin-left:15px;
    }
    label+input{
      margin-left:0;
    }
  </style>
  
  <template>
    <label>[[label]]</label>
    <input type="radio" checked="[[isTrue]]" on-tap="trueChecked">[[yesMsg]]
    <input type="radio" checked="[[isFalse]]" on-tap="falseChecked">[[noMsg]]
    <template is="dom-if" if="[[showIgnore]]">
      <input type="radio" checked="[[isIgnore]]" on-tap="ignoreChecked">[[allMsg]]
    </template>
    <input id="input" name="[[name]]" value="{{value}}" tabindex$="[[tabIndex]]" hidden>
  </template>

  <script>
    Polymer({
      is: 'things-tristate-radio',

      properties: {
        /**
         * label property
         */
        label: {
          type: String
        },

        /**
         * true 버튼 Checked 여부
         */
        isTrue: {
          type: Boolean,
          value: false
        },

        /**
         * false 버튼 Checked 여부
         */
        isFalse: {
          type: Boolean,
          value: false
        },

        /**
         * ignore 버튼 Checked 여부
         */
        isIgnore: {
          type: Boolean,
          value: true
        },

        /**
         * ignore 버튼 표시 여부
         */
        showIgnore: {
          type: Boolean,
          value: false
        },

        /**
         * radio 버튼의 값
         */
        value: {
          type: Boolean,
          notify: true,
          observer: '_valueChanged'
        },

        yesMsg: {
          type: String,
          value: 'Yes'
        },

        noMsg: {
          type: String,
          value: 'No'
        },

        allMsg: {
          type: String,
          value: 'All'
        },
        tabIndex:{
          type: String
        }
      },

      /**
       * 값이 변경되었을 경우 버튼 값 바인딩
       */
      _valueChanged: function(value) {
        if((typeof value) == 'string') {
          this.isTrue = (value && value.toLowerCase()[0] == 't') ? true : false;
          this.isFalse = (value && value.toLowerCase()[0] != 't') ? true : false;

        } else {
          this.isTrue = (value === true) ? true : false;
          this.isFalse = (value === false) ? true : false;
        }

        this.isIgnore = !this.isTrue && !this.isFalse;
      },

      /**
       * true 버튼 클릭시
       */
      trueChecked: function() {
        this.value = true;
        this.fire('things-tristate-radio-value-changed', 'yes');
      },

      /**
       * false 버튼 클릭시
       */
      falseChecked: function() {
        this.value = false;
        this.fire('things-tristate-radio-value-changed', 'no');
      },

      /**
       * ignore 버튼 클릭시
       */
      ignoreChecked: function() {
        this.value = null;
        this.fire('things-tristate-radio-value-changed', 'ignore');
      },
      /**
       * focus
       */
      focus: function(){
        this.$['input'].focus();
      },
      /**
       * set tab index
       */
      setTabindex: function(tabIndex){
        this.$['input'].setAtrribute('tabindex',tabIndex);
      },

    })
  </script>
</dom-module>
